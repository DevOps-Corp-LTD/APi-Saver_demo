# APISaver Backend Environment Configuration
# Copy this file to .env and fill in the values
# For production, ensure all secrets are strong and randomly generated

# ============================================
# REQUIRED - Database Configuration
# ============================================
# Full database connection URL (OPTIONAL)
# If not set, DATABASE_URL will be automatically constructed from POSTGRES_* variables
# Format: postgres://user:password@host:port/database
# For Docker: postgres://apisaver:${POSTGRES_PASSWORD}@postgres:5432/apisaver
# For local: postgres://apisaver:apisaver@localhost:5432/apisaver
DATABASE_URL=postgres://apisaver:apisaver@localhost:5432/apisaver

# ============================================
# REQUIRED - Security Secrets (Production)
# ============================================
# JWT Secret (REQUIRED in production)
# Generate with: openssl rand -base64 32
# Must be at least 32 characters long
# WARNING: Never use default values in production!
JWT_SECRET=change-me-to-a-strong-secret-key

# Encryption key for secrets (REQUIRED in production)
# Must be exactly 64 hexadecimal characters (32 bytes)
# Generate with: openssl rand -hex 32
# WARNING: Never use default values in production!
ENCRYPTION_KEY=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef

# ============================================
# Server Configuration
# ============================================
# Server port
PORT=3000

# Server host
HOST=0.0.0.0

# Environment: development | production
# In production mode, all secrets MUST be set or the app will fail to start
NODE_ENV=development

# ============================================
# Application Configuration
# ============================================
# Default cache TTL in seconds (0 = forever, cache as long as possible)
DEFAULT_CACHE_TTL=0

# Source selection mode: priority | round-robin
SOURCE_SELECTION_MODE=priority

# Rate limits
# Maximum requests per window
RATE_LIMIT_MAX=100
# Time window in milliseconds
RATE_LIMIT_WINDOW_MS=60000

# CORS allowed origins (comma-separated)
# For production, use your actual domain(s)
# Example: https://yourdomain.com,https://www.yourdomain.com
CORS_ORIGINS=http://localhost:5173

# Log level: trace, debug, info, warn, error, fatal
LOG_LEVEL=info

# ============================================
# High Availability (Optional)
# ============================================
# Redis URL for distributed rate limiting and job locks
# Required only when running multiple backend instances
# REDIS_URL=redis://redis:6379

# ============================================
# Domain & TLS Configuration (Production)
# ============================================
# Domain name for SSL certificate (Let's Encrypt)
DOMAIN=apisaver.example.com

# Email for Let's Encrypt certificate registration
EMAIL=admin@example.com
